!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.viewportUnitsBuggyfill=t()}(this,function(){"use strict";var e,t,n,i,r,o=!1,a=window.navigator.userAgent,s=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,c=[].forEach,u=!1,d=!1,l=a.indexOf("Opera Mini")>-1,f=/(iPhone|iPod|iPad).+AppleWebKit/i.test(a)&&((r=a.match(/OS (\d)/))&&r.length>1&&parseInt(r[1])<8),h=a.indexOf(" Android ")>-1&&a.indexOf("Version/")>-1&&parseFloat((a.match("Android ([0-9.]+)")||[])[1])<=4.4;function p(){o&&(w(),setTimeout(function(){i.textContent=m(),i.parentNode.appendChild(i)},1))}function w(){return n=[],c.call(document.styleSheets,function(e){"patched-viewport"!==e.ownerNode.id&&e.cssRules&&"ignore"!==e.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(e.media&&e.media.mediaText&&window.matchMedia&&!window.matchMedia(e.media.mediaText).matches||c.call(e.cssRules,v))}),n}function v(t){if(7===t.type){var i;try{i=t.cssText}catch(e){return}return s.lastIndex=0,void(s.test(i)&&(n.push([t,null,i]),e.hacks&&e.hacks.findDeclarations(n,t,null,i)))}if(t.style)c.call(t.style,function(i){var r=t.style.getPropertyValue(i);t.style.getPropertyPriority(i)&&(r+=" !important"),s.lastIndex=0,s.test(r)&&(n.push([t,i,r]),e.hacks&&e.hacks.findDeclarations(n,t,i,r))});else{if(!t.cssRules)return;c.call(t.cssRules,function(e){v(e)})}}function m(){var i,r;i=window.innerHeight,r=window.innerWidth,t={vh:i,vw:r,vmax:Math.max(r,i),vmin:Math.min(r,i)};var o,a,c=[],u=[];return n.forEach(function(t){var n=function(t,n,i){var r,o=[];r=i.replace(s,g),e.hacks&&(r=e.hacks.overwriteDeclaration(t,n,r));n&&(o.push(t.selectorText),r=n+": "+r+";");var a=t.parentRule;for(;a;)o.unshift("@media "+a.media.mediaText),a=a.parentRule;return{selector:o,content:r}}.apply(null,t),i=n.selector.length?n.selector.join(" {\n")+" {\n":"",r=new Array(n.selector.length+1).join("\n}");if(!i||i!==o)return u.length&&(c.push(o+u.join("\n")+a),u.length=0),void(i?(o=i,a=r,u.push(n.content)):(c.push(n.content),o=null,a=null));i&&!o&&(o=i,a=r),u.push(n.content)}),u.length&&c.push(o+u.join("\n")+a),l&&c.push("* { content: normal !important; }"),c.join("\n\n")}function g(e,n,i){var r=t[i];return parseFloat(n)/100*r+"px"}function y(e){return e.slice(0,e.indexOf("/",e.indexOf("://")+3))}return u||(u=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),{version:"0.5.3",findProperties:w,getCss:m,init:function(t){if(!o){if(!0===t&&(t={force:!0}),(e=t||{}).isMobileSafari=f,e.isBadStockAndroid=h,d||!e.force&&!f&&!u&&!h&&!l&&(!e.hacks||!e.hacks.required(e)))return window.console&&d&&console.info("viewport-units-buggyfill requires a proper CSSOM and basic viewport unit support, which are not available in IE8 and below"),{init:function(){}};var n,r,a;e.hacks&&e.hacks.initialize(e),o=!0,(i=document.createElement("style")).id="patched-viewport",document.head.appendChild(i),n=function(){var t,n,i,r=(t=p,n=e.refreshDebounceWait||100,function(){var e=this,r=arguments;clearTimeout(i),i=setTimeout(function(){t.apply(e,r)},n)});window.addEventListener("orientationchange",r,!0),window.addEventListener("pageshow",r,!0),(e.force||u||function(){try{return window.self!==window.top}catch(e){return!0}}())&&(window.addEventListener("resize",r,!0),e._listeningToResize=!0),e.hacks&&e.hacks.initializeEvents(e,p,r),p()},r=0,a=function(){--r||n()},c.call(document.styleSheets,function(e){var t,n;e.href&&y(e.href)!==y(location.href)&&"ignore"!==e.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(r++,t=e.ownerNode,n=a,function(e,t,n){var i=new XMLHttpRequest;if("withCredentials"in i)i.open("GET",e,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");(i=new XDomainRequest).open("GET",e)}i.onload=t,i.onerror=n,i.send()}(t.href,function(){var e=document.createElement("style");e.media=t.media,e.setAttribute("data-href",t.href),e.textContent=this.responseText,t.parentNode.replaceChild(e,t),n()},n))}),r||n()}},refresh:p}});